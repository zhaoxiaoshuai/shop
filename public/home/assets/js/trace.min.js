!function(){"use strict";var i=function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);return i};window.PTP_PARAMS=window.PTP_PARAMS||{},i(window.PTP_PARAMS,{EnableLogMoGuJs:!1,uuid:["__xduuid","__mgjuuid"],uid:"__ud_",platform:function(){var i=navigator.userAgent,n=window.location.href;return i.indexOf("xiaodian4android")!=-1?"6":i.indexOf("xiaodian4ios")!=-1?"5":/iphone|android|ipad/i.test(i)?n.indexOf("meilishuo.com")>-1?"46":"38":n.indexOf("meilishuo.com")>-1?"45":"37"},hrefRe:/http[s]?:\/\/(.*)\.(xiaodian|meilishuo)\.com([\/]|\/.*|)$/,mgjRe:/(xd|mgj):\/\//,isNativeRe:/xiaodian/i,nativeLog:{}})}();!function(e){"use strict";function t(){this.arr="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",this.arrLen=this.arr.length}function n(){var e=l.getPtpInfoAndExtra(),t=p.getValue(v.pEventId);m.logData("p",t,e)}function r(){if(o.info.isNative){var e=l.getPtpCnt();window.M&&M.web.AB?M.web.AB.collectExps().then(function(t){t.length?m.logAppPevent(e,t):m.logAppPevent(e)}):m.logAppPevent(e)}else h?n():p.listenTo("LoggerReady",function(){n()})}if(!e.logger){var o=e.logger={};o.version="0.1.24",o._xcore=!1;var i=navigator.userAgent.toLowerCase().indexOf("xcore")>-1;i&&window.loader&&window.loader.script&&(o._xcore=!0),void 0===location.search&&(location.search=location.href.split("#")[0]),"undefined"==typeof console&&(window.console={log:function(){}});var a="**logger.js---打点出错:";!function(){function e(){if(!r){r=!0;for(var e=0;e<n.length;e++)n[e].fn.call(window,n[e].ctx);n=[]}}function t(){"complete"===document.readyState&&e()}var n=[],r=!1,i=!1;o.ready=function(o,a){return r?void setTimeout(function(){o(a)},1):(n.push({fn:o,ctx:a}),void("complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(e,1):i||(document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):(document.attachEvent("onreadystatechange",t),window.attachEvent("onload",e)),i=!0)))}}(),function(){var e=window.jQuery||window.Zepto,t=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]==t)return n+1;return-1},n={getA:function(e){var t=e;if("A"==t.tagName)return e;for(;t.parentNode;)if(t=t.parentNode,"A"==t.tagName)return t},getParentByClass:function(t,n){if(t){if(e)return $(t).parents("."+n);for(var r,o=t;o.parentNode;)if(o=o.parentNode,r=o.className&&o.className.indexOf(n)!=-1)return o}},getParents:function(t,n){if(t){if(n=n||"",e)return n="["+n+"]",$(t).parents(n)[0];for(var r,o=t;o.parentNode;)if(o=o.parentNode,r=o.getAttribute&&o.getAttribute(n))return o}},getIndex:function(n,r,o){if(!n||!r||!o)return 0;if(e)return $("["+n+'="'+r+'"]').index($(o))+1;if(document.querySelectorAll){var i=document.querySelectorAll("["+n+'="'+r+'"]');return t(i,o)}return 1},getElemIndex:function(n,r,o){if(!n||!r||!o)return 0;if(e)return $(n).find(r).index($(o))+1;if(n.querySelectorAll){var i=n.querySelectorAll(r);return t(i,o)}return 1},is:function(e,t){return!(!e||!t)&&(e.length&&(e=e[0]),e.nodeName.toLowerCase()===t.toLowerCase()||void 0)}};o.jq=n}();var u=1001,c={},d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},f=/(&|<|>|"|`|')/g,p={escapeHtml:function(e){return e.replace(f,function(e){return d[e]})},getIEVersion:function(){var e,t=-1,n=navigator.userAgent;return"Microsoft Internet Explorer"==navigator.appName?(e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!==e.exec(n)&&(t=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==e.exec(n)&&(t=parseFloat(RegExp.$1))),t},stringify:function(e){if("undefined"!=typeof JSON)return JSON.stringify(e);var t=typeof e;if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,r,o=[],i=e&&e.constructor==Array;for(n in e)r=e[n],t=typeof r,e.hasOwnProperty(n)&&("string"==t?r='"'+r+'"':"object"==t&&null!==r&&(r=p.stringify(r)),o.push((i?"":'"'+n+'":')+String(r)));return(i?"[":"{")+String(o)+(i?"]":"}")},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},getCookieInArray:function(e){for(var t=0,n=e.length;t<n;t++){var r=p.getCookie(e[t]);if(r)return r}return""},getCookieOrFunc:function(e){return"function"==typeof e?p.getValue(e):p.getCookie(e)},getCookie:function(e){if(p.isArray(e))return p.getCookieInArray(e);var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!==t?decodeURIComponent(t[2]):""},getQuery:function(e,t){void 0===t&&(t=location.search);var n="(^|&|\\?)"+e+"=([^&]*)(&|$)",r=new RegExp(n,"i"),o=t.substr(1).match(r);return null!==o?this.escapeHtml(decodeURIComponent(o[2])):""},setQuery:function(e,t,n){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),o=e.indexOf("?")!==-1?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+o+t+"="+n},getTime:function(){return parseInt((new Date).getTime()/1e3)},registerEvent:function(e,t,n){window.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},extend:function(){for(var e=arguments,t=arguments[0],n=1;n<e.length;n++){var r=e[n];for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t},getValue:function(e){if(e){if("function"==typeof e)try{var t=Array.prototype.slice.call(arguments,1);return e.apply(null,t)}catch(n){return console.log(a+n),""}return e}},loadScript:function(e,t){if(window["callback_"+u]=function(e){t&&t(e)},e+="?callback=callback_"+u,u+=1,o._xcore)window.loader.script(e,function(){},function(){});else{var n=document.createElement("script");n.src=e;var r=document.getElementsByTagName("head")[0];r&&r.appendChild(n)}},listenTo:function(e,t){c[e]||(c[e]=[]),c[e].push(t)},fire:function(e){var t=c[e];if(t&&t.length){for(var n=0,r=t.length;n<r;n++)t[n].call();c[e]=[]}},hasKey:function(e){if(!e)return!1;for(var t in e)if(e.hasOwnProperty(t))return!0;return!1}};o.util=p;var s="https:"===location.protocol?"https:":"http:",g="mogujie";location.host.indexOf("meilishuo")!=-1&&(g="meilishuo"),o.config={LogUrl:s+"//log.juangua.com/log.php",CookieUrl:s+"//portal."+g+".com/api/util/getUuid",shouldRequestCookie:function(){if(location.protocol.indexOf("file:")!=-1)return!1;var e=o.util.getCookieOrFunc(o.config.uuid);return!e},uuid:["__mgjuuid","__xduuid"],uid:"__ud_",sfrom:"from_site",cpsinfo:"__cpsinfo",ptp_cnt_a:"",ptp_cnt_b:"",ptp_cnt_c_d:"",platform:function(){var e=navigator.userAgent.toLowerCase();if(/qq\/([\d\.]+)/.test(e))return 48},pEventId:"1001",isMobileRe:/iphone|android|ipad/i,ptpRe:/[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+/i,hrefRe:/http[s]?:\/\/\w+\.(mogujie|xiaodian|uniny)\.com([\/]|\/.*|)$/,mgjRe:/mgj:\/\//,mtRe:/\?.*[&]?mt=([^\.]+)\.([^\.]+)\.([^\.&#]+)/,chasing:["f","f2","mlf"],urlExtend:["acm"],urlExtendFn:function(e){},extra:{},isNativeRe:/(mogujie|meilishuo|mls)/i,nativeLog:{}},t.prototype={rand:function(e){var t,n="";for(t=0;e>t;t++)n+=this.arr.charAt(Math.random()*this.arrLen);return n},pageHash:function(e){var t=5381,n=e.length-1;if("string"==typeof e)for(;n>-1;n--)t+=(t<<5)+e.charCodeAt(n);else for(;n>-1;n--)t+=(t<<5)+e[n];var r=2147483647&t,o="";do o+=this.arr.charAt(61&r);while(r>>=6);return o}},function(){var e=o.config,t=navigator.userAgent.toLocaleLowerCase();o.info={isApp:e.isNativeRe.test(t),isNative:e.isNativeRe.test(t),isMobile:e.isMobileRe.test(t),isIos:t.indexOf("iphone")>-1,isAndroid:t.indexOf("android")>-1,isXd:location.href.indexOf(".xiaodian.")>-1}}(),function(){function e(){var e="1";return g.isMobile&&(e="m1"),g.isIos&&g.isNative?e="am0":g.isAndroid&&g.isNative&&(e="am1"),e}function n(){var e=p.getValue(s.ptp_cnt_b);if(e)return e;var t="",n=location.href.split("?")[0];return t=v.pageHash(n)}function r(){var e=p.getCookieOrFunc(s.cpsinfo);return e?e=e.replace("-",","):""}function i(){var e=p.getValue(s.platform);return e?e:g.isMobile?32:31}function a(e){if(e){var t=p.getValue(s.urlExtendFn,e);return p.hasKey(t)?t:void 0}}function u(e){if(e){e.length&&(e=e[0]);var t=p.getValue(s.ptp_cnt_c_d,e);if(t)return t;var n=e.getAttribute("data-ptp-customc");if(n)return{c:n,d:l.getIndex("data-ptp-customc",n,e)};if(e=l.getParents(e,"data-ptp-customc"))return n=e.getAttribute("data-ptp-customc"),n?{c:n,d:l.getIndex("data-ptp-customc",n,e)}:void 0}}function c(){return window.PTP_PARAMS&&p.extend(s,PTP_PARAMS),{time:p.getTime(),sfrom:p.getCookieOrFunc(s.sfrom),uuid:p.getCookieOrFunc(s.uuid),uid:p.getCookieOrFunc(s.uid),cpsinfo:r(),refer:location.href,rerefer:document.referrer,ptp_url:p.getQuery("ptp",location.search),ptp_ref:p.getQuery("ptp",document.referrer),_notNative:!g.isNative}}function d(){h.a=e(),h.b=n(),h.c=0,h.d=0}var f,s=o.config,g=o.info,l=o.jq,v=new t,m=c(),h={a:e(),b:n(),c:0,d:0,e:s.ptp_cnt_e?s.ptp_cnt_e:v.rand(5)};o.ptp=f={getPtpByType:function(e,t){var n=i(),r=[m.time,0,"p/e",n,o.version,"1001",m.uuid,m.uid,m.refer,m.rerefer];return"p"==e?(t=t||"1001",r[2]="p",r[5]=t,r):"e"==e?(t=t||"50001",r[2]="e",r[5]=t,r):void 0},getPtpCnt:function(e,t){return e||(e=h.c),t||(t=h.d),[h.a,h.b,e,t,h.e].join(".")},getPtpInfo:function(){var e={};return p.extend(e,m,{ptp_cnt:f.getPtpCnt()})},getPtpInfoAndExtra:function(){var e=f.getPtpInfo(),t={};if(s.extra)for(var n in s.extra)s.extra.hasOwnProperty(n)&&(t[n]=p.getValue(s.extra[n]));return p.extend(e,t)},createPtpCnt:function(e){var t=u(e),n=0,r=0;if(t)return f.getPtpCnt(t.c,t.d);var o=l.getParents(e,"data-ptp"),i=l.getParentByClass(e,"data-ptp-item");return o&&(n=o.getAttribute("data-ptp"),r=i?l.getElemIndex(o,".data-ptp-item",i):l.getElemIndex(o,"a",e)),r||(r=0),f.getPtpCnt(n,r)},makeUrl:function(e,t,n){var r=e.match(/(#.+)$/);return e=e.replace(/(#.+)$/,""),e=p.setQuery(e,"ptp",t),e=f.getChasingParams(e),e=f.getExtendParams(n,e),r&&(e+=r[1]),e},getChasingParams:function(e){void 0===e&&(e="");var t=e;if(!s.chasing)return t;s.chasing.length||(s.chasing=[s.chasing]);for(var n,r,o=0,i=s.chasing.length;o<i;o++)n=s.chasing[o],r=p.getQuery(n),r&&(t=p.setQuery(t,n,r));for(var a=location.search,u=/[\?&](_f_[^=]+)=([^&]+)/g,c=u.exec(a);c&&3==c.length;)t=p.setQuery(t,c[1],c[2]),c=u.exec(a);return t},getExtendParams:function(e,t){var n=t;if(!e||!l.is(e,"a"))return n;var r=a(e);if(r)for(var o in r)r.hasOwnProperty(o)&&(n=p.setQuery(n,o,r[o]));else{e.length&&(e=e[0]);for(var i=s.urlExtend||[],u=0,c=i.length;u<c;u++){var d=i[u],f=e.getAttribute("data-ext-"+d);f&&(n=p.setQuery(n,d,f))}}return n},refreshPtp:function(){m=c(),d()},refreshE:function(){h&&(h.e=v.rand(5))},refreshCookie:function(){m&&(m.sfrom=p.getCookieOrFunc(s.sfrom),m.uuid=p.getCookieOrFunc(s.uuid),m.uid=p.getCookieOrFunc(s.uid),m.cpsinfo=r())}}}(),function(){var e=o.info,t=o.ptp,n=o.config,r=0,i=function(e,t){t=t||{};var n=[];for(var r in t){var o=t[r];o||(o=""),o=encodeURIComponent(o),n.push(r+"="+o)}n=n.join("&"),e=e.indexOf("?")>-1?e+"&"+n:e+"?"+n;var i=new Image;i.src=e},u=function(e,t){t=t||{};var n,o=r++;try{n=document.createElement('<iframe name="'+o+'">')}catch(i){n=document.createElement("iframe"),n.setAttribute("name",o)}try{n.style.display="none",document.body.appendChild(n),n.contentWindow.name=o;var u=document.createElement("form");u.setAttribute("method","POST"),u.setAttribute("action",e),u.setAttribute("target",o);for(var c in t)if(t.hasOwnProperty(c)){var d=document.createElement("input");d.setAttribute("type","hidden"),d.setAttribute("name",c),d.setAttribute("value",t[c]),u.appendChild(d)}document.body.appendChild(u),u.submit(),p.registerEvent(n,"load",function(){try{document.body.removeChild(u),document.body.removeChild(n)}catch(e){}})}catch(i){console.log(a+i)}},c={sendLog:function(e,t,n){var r=p.getIEVersion(),o=r!=-1&&r<=8;o&&!n?u(e,t):i(e,t)},sendAppLog:function(e,t){return e+="",n.nativeLog&&n.nativeLog.logE?n.nativeLog.logE(e,t):void(window.hdp&&window.hdp["do"]?hdp["do"]("mgj.tracker.sendEvent",e,t):document.addEventListener("deviceready",function(){window.mgj&&mgj.tracker&&mgj.tracker.sendEvent&&mgj.tracker.sendEvent(e,t)},!1))},logAppPevent:function(e,t){return n.nativeLog&&n.nativeLog.logP?n.nativeLog.logP(e):void(window.hdp&&window.hdp["do"]?hdp["do"]("mgj.pevent",e,t).then(function(){},function(e){console.log("pevent:"+e)}):document.addEventListener("deviceready",function(){window.mgj&&mgj.pevent&&mgj.pevent(function(){},null,e)},!1))},logData:function(r,o,i){var a=t.getPtpByType(r,o);a.push(p.stringify(i)),e.isNative?c.sendAppLog(o,i):c.sendLog(n.LogUrl,{v:1,data:a.join("\t")})}};o.send=c}(),function(){function e(e){var t=e.href;if(!(t.indexOf("mogujie.com/mtalk/")>-1)&&(r.hrefRe.test(t)||r.mgjRe.test(t))){var n=e.getAttribute("data-ptp-cache-id");t=e.getAttribute("href"),n&&r.ptpRe.test(n)||(n=i.createPtpCnt(e),e.setAttribute("data-ptp-cache-id",n)),e.href=i.makeUrl(t,n,e)}}function t(e){if(e.getAttribute){var t=e.getAttribute("href");if(null==t||0===t.indexOf("#"))return!1}return!0}function n(n){var r=n||window.event,o=r.target||r.srcElement,i=a.getA(o),u="AREA"===o.nodeName?o:null;u&&(i=u),i&&(i.href&&i.href.indexOf("javascript:")>-1||t(i)&&e(i))}var r=o.config,i=o.ptp,a=o.jq;if(!o._xcore){var u="tap"in document.createElement("div")?"tap":"mousedown";p.registerEvent(document,u,n),p.registerEvent(document,"touchstart",n)}}();var l=o.ptp,v=o.config,m=o.send,h=!v.shouldRequestCookie();h||p.loadScript(v.CookieUrl,function(){h=!0,o.ptp.refreshCookie(),p.fire("LoggerReady")}),o.ready(function(){o.ptp.refreshPtp(),r()}),o.refreshPevent=function(){o.ready(function(){o.ptp.refreshPtp(),o.ptp.refreshE(),r()})},o.log=function(e,t){void 0!==e&&(t=t||{},o.ready(function(){var n=l.getPtpInfoAndExtra();h?o.send.logData("e",e,p.extend({},n,t)):p.listenTo("LoggerReady",function(){var n=l.getPtpInfoAndExtra();o.send.logData("e",e,p.extend({},n,t))}),window.MtaH5&&MtaH5.clickStat&&MtaH5.clickStat(e,t)}))},o.generatePtpParams=function(e,t){if(void 0!==e){var n="";return n=t?l.createPtpCnt(t):l.getPtpCnt(),l.makeUrl(e,n,t)}},"undefined"!=typeof module&&"object"==typeof exports?module.exports=o:"function"==typeof define&&(define.amd||define.cmd)&&define("logger",function(){return o})}}(window);var trace=function(){"use strict";function extend(){var arguments$1=arguments;var target=arguments[0];var argsLen=arguments.length;for(var i=1;i<argsLen;i++){var source=arguments$1[i];for(var p in source){if(source.hasOwnProperty(p)){target[p]=source[p]}}}return target}function getValue(fn){if(typeof fn!=="function"){return fn}return fn()}var config={customUrl:function customUrl(){},getExtraTime:function getExtraTime(){return 0},blankTime:"__trace__headendt"};function getFormatUrl(url){url=url||location.href;var customUrl=getValue(config.customUrl);if(customUrl){customUrl=customUrl.split("https://").join("").split("http://").join("");return customUrl}if(typeof url==="string"){url=url.split("?")[0].split("#")[0].split("https://").join("").split("http://").join("");if(url.charAt(url.length-1)==="/"){url=url.substr(0,url.length-1)}}return url}var CHROME_IE_STACK_REGEXP=/^\s*at .*(\S+\:\d+|\(native\))/m;var SAFARI_NATIVE_CODE_REGEXP=/^(eval@)?(\[native code\])?$/;function _map(array,fn,thisArg){if(typeof Array.prototype.map==="function"){return array.map(fn,thisArg)}else{var output=new Array(array.length);for(var i=0;i<array.length;i++){output[i]=fn.call(thisArg,array[i])}return output}}function _filter(array,fn,thisArg){if(typeof Array.prototype.filter==="function"){return array.filter(fn,thisArg)}else{var output=[];for(var i=0;i<array.length;i++){if(fn.call(thisArg,array[i])){output.push(array[i])}}return output}}function _indexOf(array,target){if(typeof Array.prototype.indexOf==="function"){return array.indexOf(target)}else{for(var i=0;i<array.length;i++){if(array[i]===target){return i}}return-1}}var ErrorStackParser={parse:function ErrorStackParser$$parse(error){if(error.stack&&error.stack.match(CHROME_IE_STACK_REGEXP)){return this.parseV8OrIE(error)}else if(error.stack){return this.parseFFOrSafari(error)}else{return[]}},extractLocation:function ErrorStackParser$$extractLocation(urlLike){if(urlLike.indexOf(":")===-1){return[urlLike]}var regExp=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/;var parts=regExp.exec(urlLike.replace(/[\(\)]/g,""));return[parts[1],parts[2]||undefined,parts[3]||undefined]},parseV8OrIE:function ErrorStackParser$$parseV8OrIE(error){var filtered=_filter(error.stack.split("\n"),function(line){return!!line.match(CHROME_IE_STACK_REGEXP)},this);return _map(filtered,function(line){if(line.indexOf("(eval ")>-1){line=line.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,"")}var tokens=line.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1);var locationParts=this.extractLocation(tokens.pop());var functionName=tokens.join(" ")||undefined;var fileName=_indexOf(["eval","<anonymous>"],locationParts[0])>-1?undefined:locationParts[0];return{functionName:functionName,filename:fileName,row:locationParts[1],column:locationParts[2],line:line}},this)},parseFFOrSafari:function ErrorStackParser$$parseFFOrSafari(error){var filtered=_filter(error.stack.split("\n"),function(line){return!line.match(SAFARI_NATIVE_CODE_REGEXP)},this);return _map(filtered,function(line){if(line.indexOf(" > eval")>-1){line=line.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")}if(line.indexOf("@")===-1&&line.indexOf(":")===-1){return{functionName:line}}else{var tokens=line.split("@");var locationParts=this.extractLocation(tokens.pop());var functionName=tokens.join("@")||undefined;return{functionName:functionName,filename:locationParts[0],row:locationParts[1],column:locationParts[2],line:line}}},this)}};var parser={ErrorStackParser:ErrorStackParser,parse:function parse(error){var r=ErrorStackParser.parse(error);if(!r||r.length<=0){return error.message}var info=r[0];var strs=[];if(info.filename){var filename=info.filename;if(filename.lastIndexOf("/")>-1){filename=info.filename.slice(info.filename.lastIndexOf("/"))}strs.push(filename)}if(info.functionName){strs.push("@"+info.functionName)}if(info.row){strs.push(" "+info.row)}return error.message+" - "+strs.join("")},normalize:function normalize(error){var r=ErrorStackParser.parse(error);return r}};function getPlatform(){var ua=navigator.userAgent.toLowerCase();return/iphone|android|ipad/i.test(ua)?"h5":"pc"}function getBrowser(){var nAgt=navigator.userAgent;var unknown="其它";var browser=unknown;var version="";var majorVersion="";var verOffset;var ix;if((verOffset=nAgt.indexOf("Opera"))!==-1){browser="Opera";version=nAgt.substring(verOffset+6);if((verOffset=nAgt.indexOf("Version"))!==-1){version=nAgt.substring(verOffset+8)}}if((verOffset=nAgt.indexOf("OPR"))!==-1){browser="Opera";version=nAgt.substring(verOffset+4)}else if(nAgt.indexOf("MicroMessenger")!==-1){browser="Wechat"}else if(nAgt.indexOf("QQ")!==-1){browser="QQ"}else if((verOffset=nAgt.indexOf("MSIE"))!==-1){browser="IE";version=nAgt.substring(verOffset+5)}else if((verOffset=nAgt.indexOf("Chrome"))!==-1){browser="Chrome";version=nAgt.substring(verOffset+7)}else if((verOffset=nAgt.indexOf("Firefox"))!==-1){browser="Firefox";version=nAgt.substring(verOffset+8)}else if(nAgt.indexOf("Trident/")!==-1){browser="IE";version=nAgt.substring(nAgt.indexOf("rv:")+3)}else if((verOffset=nAgt.indexOf("Safari"))!==-1||nAgt.indexOf("iPhone")!==-1){browser="Safari";version=nAgt.substring(verOffset+7);if((verOffset=nAgt.indexOf("Version"))!==-1){version=nAgt.substring(verOffset+8)}}if((ix=version.indexOf(";"))!==-1){version=version.substring(0,ix)}if((ix=version.indexOf(" "))!==-1){version=version.substring(0,ix)}if((ix=version.indexOf(")"))!==-1){version=version.substring(0,ix)}if(version){majorVersion=parseInt(""+version,10);if(isNaN(majorVersion)){version=""+parseFloat(navigator.appVersion);majorVersion=parseInt(navigator.appVersion,10)}}return majorVersion?browser+"_"+majorVersion:browser+"_unknown"}function getOs(){var unknown="其它";var os=unknown;var nAgt=navigator.userAgent;var clientStrings=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var id in clientStrings){var cs=clientStrings[id];if(cs.r.test(nAgt)){os=cs.s;break}}var osVersion=unknown;if(/Windows/.test(os)){osVersion=/Windows (.*)/.exec(os)[1];os="Windows"}switch(os){case"Mac OS X":osVersion="";break;case"Android":var matched=/Android( |\/)([\.\_\d]+)/.exec(nAgt);if(matched&&matched.length>0){var arr=(matched[2]||"").split(".").slice(0,2);osVersion=arr.join(".")}break;case"iOS":osVersion=/OS (\d+)_(\d+)_?(\d+)?/.exec(nAgt);if(osVersion&&osVersion.length>0){osVersion=osVersion[1]+"."+osVersion[2]}break}return os===unknown?os:os+osVersion}function getScreen(){var _screen=window.screen;var width;var height;var screenSize="";if(_screen&&_screen.width){width=_screen.width?_screen.width:"";height=_screen.height?_screen.height:"";screenSize+=""+width+"x"+height}return screenSize}function getDevicePixelRatio(){var dpr=(window.devicePixelRatio?window.devicePixelRatio:1)-0;return dpr.toFixed(1)}function getDeviceInfo(){return{platform:getPlatform(),screen:getScreen(),os:getOs(),browser:getBrowser(),devicePixelRatio:getDevicePixelRatio()}}function getPerformanceInfo(){var timing=window.performance&&window.performance.timing;if(!timing){return{}}var blankTime=window[config.blankTime];if(!blankTime){blankTime=timing.domContentLoadedEventStart}var res={dns:timing.domainLookupEnd-timing.domainLookupStart,tcp:timing.connectEnd-timing.connectStart,request:timing.responseStart-timing.requestStart,response:timing.responseEnd-timing.responseStart,domContentLoad:timing.domContentLoadedEventEnd-timing.navigationStart,blankTime:blankTime-timing.navigationStart,readyTime:timing.domInteractive-timing.navigationStart,onloadTime:timing.loadEventEnd-timing.navigationStart,extraTime:getValue(config.getExtraTime)||0};return res}function _log(){var info=getDeviceInfo();var performance=getPerformanceInfo();performance.formatUrl=getFormatUrl();var logger=window.logger;if(logger){logger.log&&logger.log("016000001",extend({},info,performance))}}var queue=[];function isNewError(msg,file,line,col){var flag=true;for(var i=0;i<queue.length;i++){var item=queue[i]||{};if(item.msg===msg&&item.file===file&&item.line===line&&item.col===col){flag=false;break}}return flag}function onErrorHandler(msg,file,line,col,err){if(!isNewError(msg,file,line,col)){return}var stack="";if(err){if(err.hasReported){return}stack=err.stack||""}queue.push({msg:msg,file:file,line:line,col:col});var logger=window.logger;if(!logger||!logger.log){return}if(typeof stack!=="string"){stack=""+stack}var data={type:0,msg:msg,stack:stack,ua:navigator.userAgent,formatUrl:getFormatUrl()};try{JSON.stringify(data);logger.log("016000011",data)}catch(err){}}var regParsePattern=/^\s*('?undefined'?|object) is not (a function|an object)\s*$/i;function shouldParse(msg){if(!msg){return false}if(regParsePattern.test(msg)){return true}if(msg.toLowerCase()==="cannot convert undefined or null to object"){return true}return false}function getErrorInfo(error,useParser){if(!error){return null}var data={};if(typeof error==="object"){data.msg=error.message||"";data.stack=error.stack||"";data.stack=data.stack;if(typeof data.stack!=="string"){data.stack=""+data.stack}}else{data.msg=error}data.ua=navigator.userAgent;data.type=1;if(shouldParse(data.msg)&&typeof error==="object"&&error.stack){try{data.msg=parser.parse(error)}catch(err){}}return data}var Logger={init:function init(){var interval=setInterval(function(){var timing=window.performance&&window.performance.timing;if(timing&&timing.loadEventEnd===0){return}clearInterval(interval);setTimeout(function(){_log()},10)},300);window.onerror=onErrorHandler},sendMsg:function sendMsg(error,extra,useParser){if(extra===void 0)extra=null;if(useParser===void 0)useParser=false;var data=getErrorInfo(error,useParser);var logger=window.logger;if(!data||!logger||!logger.log){return}var extraJSON="";if(extra){try{extraJSON=JSON.stringify(extra);if(extraJSON.length>1024){throw new Error("extra contains too much information")}}catch(e){extraJSON="";console&&console.warn&&console.warn(e)}}extend(data,{formatUrl:getFormatUrl(),extra:extraJSON});try{JSON.stringify(data);logger.log("016000011",data)}catch(err){}}};function isIE(){var myNav=navigator.userAgent.toLowerCase();return myNav.indexOf("msie")!==-1?parseInt(myNav.split("msie")[1],10):false}function _report(err){if(typeof err==="string"){err=new Error(err)}if(err.hasReported){return}err.hasReported=true;Logger.sendMsg(err,null,true)}function _inject(fn){if(typeof fn.apply!=="function"){return fn}return function(){try{return fn.apply(this,arguments)}catch(err){_report(err);console&&console.warn&&console.warn(err);throw err}}}function _transform(fn){if(!fn||typeof fn.apply!=="function"){return fn}return function(){var arguments$1=arguments;var args=[];var arg;for(var i=0,l=arguments.length;i<l;i++){arg=arguments$1[i];if(typeof arg==="function"){arg=_inject(arguments$1[i])}args.push(arg)}return fn.apply(this,args)}}function _mix(target,src){for(var key in src){target[key]=src[key]}}function injectjQuery(){var $=window.$;if(!$||$!==window.jQuery&&$!==window.Zepto){return}var _ready=$.fn.ready;$.fn.ready=_transform(_ready);var _ajax=$.ajax;if(typeof _ajax==="function"&&typeof _ajax.apply==="function"){$.ajax=function(url,options){var target=null;if(typeof options==="undefined"&&typeof url==="object"){target=url}else if(typeof options==="object"){target=options}if(target){if(typeof target.success==="function"){target.success=_inject(target.success)}if(typeof target.complete==="function"){target.complete=_inject(target.complete)}}return _ajax.apply($,arguments)}}var _Deferred=$.Deferred;if(typeof _Deferred==="function"&&typeof _Deferred.apply==="function"){$.Deferred=function(){var deferred=_Deferred.apply(this,arguments);var resolveWith=deferred.resolveWith;deferred.resolveWith=_inject(resolveWith);return deferred}}}function injectRequireJS(){var _require=window.require;var _define=window.define;if(_define&&_define.amd&&_require){window.require=_transform(_require);_mix(window.require,_require);window.define=_transform(_define);_mix(window.define,_define)}}function injectSystem(){var _setTimeout=window.setTimeout;window.setTimeout=function(fn,ms){if(typeof fn==="function"){fn=_inject(fn)}switch(arguments.length){case 0:return _setTimeout();case 1:return _setTimeout(fn);default:return _setTimeout(fn,ms)}};var _setInterval=window.setInterval;window.setInterval=_transform(_setInterval);var _requestAnimationFrame=window.requestAnimationFrame;if(typeof _requestAnimationFrame==="function"){window.requestAnimationFrame=_transform(_requestAnimationFrame)}var Promise=window.Promise;if(typeof Promise!=="undefined"){var _then=Promise.prototype.then;window.Promise.prototype.then=_transform(_then)}if(window.EventTarget&&window.EventTarget.prototype.addEventListener){var addEventListener=window.EventTarget.prototype.addEventListener;window.EventTarget.prototype.addEventListener=function(event,callback,bubble){if(callback&&typeof callback.handleEvent==="function"){callback.handleEvent=_inject(callback.handleEvent);return addEventListener.call(this,event,callback,bubble)}else{if(!callback.___wrapper){callback.___wrapper=_inject(callback)}return addEventListener.call(this,event,callback.___wrapper,bubble)}};var removeEventListener=window.EventTarget.prototype.removeEventListener;window.EventTarget.prototype.removeEventListener=function(event,callback,bubble){if(!callback){return removeEventListener.call(this,event,callback,bubble)}else{return removeEventListener.call(this,event,callback.___wrapper||callback,bubble)}}}}var Inject={init:function init(){if(isIE()&&isIE()<9){return}injectjQuery();injectRequireJS();injectSystem()}};if(window._trace){console&&console.warn&&console.warn("WARNING: you already import trace")}if(typeof window.console==="undefined"){window.console={log:function(){},warn:function(){}}}Logger.init();Inject.init();var trace=window._trace={send:function send(){},sendImmediately:function sendImmediately(){},version:"1.1.7",config:config,sendMsg:Logger.sendMsg};var index={};return index}();